<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Types ELI5 &#8212; BEAM VM Wisdoms</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="External Term Format ELI5" href="eli5-etf.html" />
    <link rel="prev" title="BIF and NIF functions ELI5" href="eli5-bif-nif.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
<section id="types-eli5">
<h1>Types ELI5<a class="headerlink" href="#types-eli5" title="Permalink to this heading">¶</a></h1>
<p>Erlang is dynamically typed language. It means that any variable,
field or function argument can contain any allowed value.</p>
<section id="type-specs">
<h2>Type Specs<a class="headerlink" href="#type-specs" title="Permalink to this heading">¶</a></h2>
<p>There is the type description language, which you can use to
describe what YOU think your functions should take and return.
These type specs are optional and the compiler will run your program like
nothing happened even if a type violation exists.
To ensure that your type specs do not contradict each other, there is
another tool called Dialyzer.</p>
<p>A type spec is a directive in source ERL file, which looks like</p>
<div class="highlight-erlang notranslate"><div class="highlight"><pre><span></span><span class="p">-</span><span class="ni">spec</span><span class="w"> </span><span class="n">func_name</span><span class="p">(</span><span class="nv">Arg</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">integer</span><span class="p">(),</span><span class="w"> </span><span class="p">_,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">any</span><span class="p">())</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb">float</span><span class="p">().</span>
</pre></div>
</div>
<p>Type specs are not code, they neither run nor prevent your program from compiling.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>You can read more about specifying types of your program in
<a class="reference external" href="http://erlang.org/doc/reference_manual/typespec.html">Typespec Reference Manual</a>
and other existing books, such as
<a class="reference external" href="http://learnyousomeerlang.com/types-or-lack-thereof">Learn You Some Erlang</a></p>
</div>
</section>
<section id="dialyzer">
<h2>Dialyzer<a class="headerlink" href="#dialyzer" title="Permalink to this heading">¶</a></h2>
<p>Dialyzer takes compiled BEAM or ERL source files as input, then
tries to guess types (type inference).</p>
<section id="how-this-works">
<h3>How This Works<a class="headerlink" href="#how-this-works" title="Permalink to this heading">¶</a></h3>
<p>Say you have written a function, <code class="docutils literal notranslate"><span class="pre">f</span></code> which takes one argument <code class="docutils literal notranslate"><span class="pre">X</span></code> and
returns something.
Dialyzer first does a general assumption that <code class="docutils literal notranslate"><span class="pre">f</span></code> is a <code class="docutils literal notranslate"><span class="pre">fun()</span></code>, which
takes any value (<code class="docutils literal notranslate"><span class="pre">X</span> <span class="pre">::</span> <span class="pre">any()</span></code>) and returns whatever (<code class="docutils literal notranslate"><span class="pre">any()</span></code>).
This is what Dialyzer guesses initially:</p>
<div class="highlight-erlang notranslate"><div class="highlight"><pre><span></span><span class="p">-</span><span class="ni">spec</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="nv">X</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">any</span><span class="p">())</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">any</span><span class="p">().</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Any()</span></code> is the widest type possible which covers any value.
Then Dialyzer analyzes usage of this function and its code and
tries to reduce argument and return types to more narrow
specific set of types.</p>
<p>For example, if Dialyzer discovers that the only two places
which call your function <code class="docutils literal notranslate"><span class="pre">f</span></code> pass an integer or an atom
argument, then <code class="docutils literal notranslate"><span class="pre">X</span></code>’s type is reduced to <code class="docutils literal notranslate"><span class="pre">integer()|atom()</span></code>
(a set of two types). This is what Dialyzer may possibly calculate:</p>
<div class="highlight-erlang notranslate"><div class="highlight"><pre><span></span><span class="p">-</span><span class="ni">spec</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="nv">X</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">integer</span><span class="p">()</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">atom</span><span class="p">())</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">any</span><span class="p">().</span>
</pre></div>
</div>
<p>If Dialyzer finds a contradiction, i.e. some types collapse to an empty type
(<code class="docutils literal notranslate"><span class="pre">none()</span></code>) or incompatible types are found, Dialyzer reports an error.
These errors may look confusing, but they often (always?) point to an
existing problem in the code.</p>
</section>
</section>
<section id="typer">
<h2>Typer<a class="headerlink" href="#typer" title="Permalink to this heading">¶</a></h2>
<p>Typer is another optional tool, found in your OTP distribution.
Using same algorithm as Dialyzer, it infers the types for a given module and
prints them. You can take them and insert into your program for future use
or to better document a large legacy project.</p>
</section>
</section>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-84125230-1', 'auto');
ga('send', 'pageview');
</script>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div style="margin-bottom:16px;">
    <a href="http://beam-wisdoms.clau.se/" alt="Wisdoms Home Page"
    title="Return to the Home Page"><img src="_static/img/bw_logo.png" width="200"></a>
</div>


<h1 class="logo"><a href="index.html">BEAM VM Wisdoms</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="eli5-vm.html">BEAM VM ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-atoms.html">Atoms ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-processes.html">Processes ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-process-heap.html">Process Heaps ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-io.html">Input/Output and Ports ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-tracing.html">Tracing ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-bif-nif.html">BIF and NIF functions ELI5</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Types ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-etf.html">External Term Format ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-property-based.html">Property Based Testing ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-efficiency.html">Efficiency ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-efficiency-memory-perf.html">Memory Performance ELI5</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="definitions.html">BEAM Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="indepth-memory-layout.html">Data Types Memory Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="indepth-data-sizes.html">BEAM Internal data sizes</a></li>
<li class="toctree-l1"><a class="reference internal" href="indepth-heap-layout.html">Process Heap Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="interfacing.html">Interfacing Erlang with the Outer World</a></li>
<li class="toctree-l1"><a class="reference internal" href="indepth-beam-file.html">BEAM File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="indepth-beam-instructions.html">BEAM Instruction Codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="indepth-io.html">IO in Erlang</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="eli5-bif-nif.html" title="previous chapter">BIF and NIF functions ELI5</a></li>
      <li>Next: <a href="eli5-etf.html" title="next chapter">External Term Format ELI5</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016-2023, Dmytro "kvakvs" Lytovchenko.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/eli5-types.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>