<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Erlang/OTP Source Style Guide &#8212; BEAM VM Wisdoms</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
<section id="erlang-otp-source-style-guide">
<h1>Erlang/OTP Source Style Guide<a class="headerlink" href="#erlang-otp-source-style-guide" title="Permalink to this heading">¶</a></h1>
<section id="general">
<h2>General<a class="headerlink" href="#general" title="Permalink to this heading">¶</a></h2>
<p>Source language is C89.</p>
<p>Source uses mix of tabs and spaces. Tab equals 8 spaces, indent is 4 spaces.
It seems that spaces are rather accepted way to indent contributions.</p>
</section>
<section id="version-control-system">
<h2>Version Control System<a class="headerlink" href="#version-control-system" title="Permalink to this heading">¶</a></h2>
<p>Erlang/OTP uses Git as its version control system.</p>
<p>Commits should have max 60 characters in the first line. Long commit description
follows after one empty line.</p>
<p>The source tree perfectly should be compilable at any time between commits (it does
not have to pass all tests between commits though), to simplify git bisect searches.</p>
</section>
<section id="headers">
<h2>Headers<a class="headerlink" href="#headers" title="Permalink to this heading">¶</a></h2>
<section id="the-define-guard">
<h3>The #define Guard<a class="headerlink" href="#the-define-guard" title="Permalink to this heading">¶</a></h3>
<p>All headers should have #define guards to prevent multiple inclusion. The format of
the symbol name is <code class="docutils literal notranslate"><span class="pre">__MODULENAME_H__</span></code> or <code class="docutils literal notranslate"><span class="pre">__MODULENAME_H</span></code>.
Pragma once is not accepted as of Sept 2016.</p>
</section>
<section id="naming-macros">
<h3>Naming Macros<a class="headerlink" href="#naming-macros" title="Permalink to this heading">¶</a></h3>
<p>All macro names are defined using uppercase letters, numbers and underscores.</p>
<p>For new macros a general suggestion for type safety is: if it’s possible to write
it as inline function, one should not create a macro and use inline
(<code class="docutils literal notranslate"><span class="pre">ERTS_INLINE</span></code> or <code class="docutils literal notranslate"><span class="pre">ERTS_FORCE_INLINE</span></code>) instead.</p>
<p>Prefer to not convert existing macros to inline without a reason (they are well
tested as is now and their compiled representation may slightly change with
inline, that is not always desirable).
Also when going from a macro to a function, its name should be changed
accordingly (lowercase + prefix), this may have some undesired consequences
for dependent modules and external code using Erlang API.</p>
</section>
<section id="naming-types">
<h3>Naming Types<a class="headerlink" href="#naming-types" title="Permalink to this heading">¶</a></h3>
<p>A new type should be named in CamelCase. A publicly visible type must have
longer prefix. For example garbage collection functions have prefix <code class="docutils literal notranslate"><span class="pre">erts_*</span></code>,
<code class="docutils literal notranslate"><span class="pre">erts_gc_*</span></code>, and types have prefix <code class="docutils literal notranslate"><span class="pre">ErtsGC*</span></code></p>
<p>Do not rename existing types without a good reason, especially if it was a
part of the public API.</p>
</section>
<section id="naming-functions">
<h3>Naming Functions<a class="headerlink" href="#naming-functions" title="Permalink to this heading">¶</a></h3>
<p>Functions are named using lowercase letters, numbers and underscores.</p>
<p>Function arguments are named using lowercase letters, numbers and underscores.</p>
<p>A globally visible non-inline function should have an <code class="docutils literal notranslate"><span class="pre">erts_</span></code> prefix to its
name.</p>
<p>All inline functions should use <code class="docutils literal notranslate"><span class="pre">ERTS_INLINE</span></code> or <code class="docutils literal notranslate"><span class="pre">ERTS_FORCE_INLINE</span></code> macro.</p>
<p>A local function inside module should be declared <code class="docutils literal notranslate"><span class="pre">static</span></code>.</p>
</section>
<section id="naming-variables">
<h3>Naming Variables<a class="headerlink" href="#naming-variables" title="Permalink to this heading">¶</a></h3>
<p>Local variables are named using lowercase letters, numbers and underscores.</p>
<p>It is suggested to have local variables defined as close to their first use as
possible.
A new variable can be declared at the beginning of any scope
(inside an <code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">for</span></code>, <code class="docutils literal notranslate"><span class="pre">do</span></code> etc), not just at the start of the function
body.</p>
<p>Consider using <code class="docutils literal notranslate"><span class="pre">const</span></code> if variable is only set once at the moment of its
declaration.</p>
<p>Consider using a strict sized type (<code class="docutils literal notranslate"><span class="pre">Uint64</span></code> or <code class="docutils literal notranslate"><span class="pre">Uint32</span></code> for example) when
you definitely know limits of your data. Otherwise consider using sizable
(<code class="docutils literal notranslate"><span class="pre">Word</span></code>) and similar.</p>
</section>
</section>
<section id="coding-conventions">
<h2>Coding conventions<a class="headerlink" href="#coding-conventions" title="Permalink to this heading">¶</a></h2>
<section id="argument-passing">
<h3>Argument Passing<a class="headerlink" href="#argument-passing" title="Permalink to this heading">¶</a></h3>
<p>If a function takes a pointer to a memory block, consider using <code class="docutils literal notranslate"><span class="pre">const</span></code>
pointer type to pass it as read only (<code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span></code> as a mutable pointer
to an immutable array of <code class="docutils literal notranslate"><span class="pre">char</span></code>).</p>
<p>If a function should return more than one value, pass pointer to the
container for the result or pass values using their address.
It is suggested to either mark such arguments in comment as <code class="docutils literal notranslate"><span class="pre">in/out</span></code> or have a
prefix <code class="docutils literal notranslate"><span class="pre">_out</span></code>.</p>
<p>To avoid mistakes, try not having similar types following each other in
argument list.
This way you’ll get compiler warning if you miss one argument position.</p>
</section>
</section>
</section>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-84125230-1', 'auto');
ga('send', 'pageview');
</script>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div style="margin-bottom:16px;">
    <a href="http://beam-wisdoms.clau.se/" alt="Wisdoms Home Page"
    title="Return to the Home Page"><img src="_static/img/bw_logo.png" width="200"></a>
</div>


<h1 class="logo"><a href="index.html">BEAM VM Wisdoms</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="eli5-vm.html">BEAM VM ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-atoms.html">Atoms ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-processes.html">Processes ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-process-heap.html">Process Heaps ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-io.html">Input/Output and Ports ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-tracing.html">Tracing ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-bif-nif.html">BIF and NIF functions ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-types.html">Types ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-etf.html">External Term Format ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-property-based.html">Property Based Testing ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-efficiency.html">Efficiency ELI5</a></li>
<li class="toctree-l1"><a class="reference internal" href="eli5-efficiency-memory-perf.html">Memory Performance ELI5</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="definitions.html">BEAM Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="indepth-memory-layout.html">Data Types Memory Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="indepth-data-sizes.html">BEAM Internal data sizes</a></li>
<li class="toctree-l1"><a class="reference internal" href="indepth-heap-layout.html">Process Heap Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="interfacing.html">Interfacing Erlang with the Outer World</a></li>
<li class="toctree-l1"><a class="reference internal" href="indepth-beam-file.html">BEAM File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="indepth-beam-instructions.html">BEAM Instruction Codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="indepth-io.html">IO in Erlang</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016-2023, Dmytro "kvakvs" Lytovchenko.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/otp-c-style-guide.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>